paths:
  /covid-tests/:
    post:
      tags:
        - CovidTest
      summary: Create a new covid test
      description: ""
      operationId: create
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          description: CovidTest object with fields defined on **CovidTest Schema**
          required: true
          schema:
            $ref: "#/definitions/CovidTest"
      responses:
        "201":
          description: Ok, CovidTest has created with success
          schema:
            $ref: "#/definitions/CovidTest"
        "401":
          description: Invalid input or error on database connection
      security:
        - JWT: []
    get:
      tags:
        - CovidTest
      summary: Get all CovidTests filtered and sorted if wish
      description: ""
      operationId: getAll
      parameters:
        - in: query
          name: sort
          schema:
            type: String
          description: Covid Tests sort params (field to be sorted, sort order asc-ascendent or desc-descendent)
        - in: query
          name: sort
          schema:
            type: String
          description: Covid Tests filtered params (it can be just a fieldName=field or a limit birthdayDate=minDate,maxDate)
      responses:
        "200":
          description: Return all Covid Tests storaged into database filtered and sorted if wished
          schema:
            type: array
            items:
              $ref: "#/definitions/CovidTest"
        "401":
          description: Any error on connection or query
      security:
        - JWT: []
  /covid-tests/{id}:
    get:
      tags:
        - CovidTest
      summary: Find a Covid Test by id
      description: ""
      operationId: getById
      parameters:
        - name: id
          in: path
          description: CovidTest ID storaged into database
          required: true
          type: string
      responses:
        "200":
          description: CovidTest founded
          schema:
            type: object
            $ref: "#/definitions/CovidTest"
        "401":
          description: Have any error on execute query or connection into database
      security:
        - JWT: []
    put:
      tags:
        - CovidTest
      summary: Find one Covid Test by id and update
      description: ""
      operationId: getOneAndUpdate
      produces:
        - application/json
      parameters:
        - in: path
          name: id
          description: Covid Test ID storaged into database
          required: true
          type: string
        - in: body
          name: body
          description: Covid Test object with fields defined on **CovidTest Schema**
          required: true
          schema:
            type: object
            $ref: "#/definitions/CovidTest"
      responses:
        "200":
          description: Covid Test founded and updated with success
          schema:
            $ref: "#/definitions/CovidTest"
        "401":
          description: Covid Test not found or have any error while updating the Covid Test
      security:
        - JWT: []
    delete:
      tags:
        - CovidTest
      summary: Find one Covid Test by id and delete
      description: ""
      operationId: getOneAndDelete
      produces:
        - application/json
      parameters:
        - in: path
          name: id
          description: Covid Test ID storaged into database
          required: true
          type: string
      responses:
        "200":
          description: Covid Test founded and deleted with success
          schema:
            $ref: "#/definitions/CovidTest"
        "401":
          description: Covid Test not found or have any error while deleting the Covid Test
      security:
        - JWT: []
  /covid-tests/count/patient:
    get:
      tags:
        - CovidTest
      summary: Get number of tests by patient
      description: ""
      operationId: countByPatient

      responses:
        "200":
          description: Have COVID Tests storaged on database
          schema:
            type: array
            items:
              type: object
              properties:
                _id:
                  type: object
                  properties:
                    status:
                      type: string
                      enum: ["Suspect", "Infected", "Non Infected"]
                      example: "Suspect"
                    symptoms:
                      type: array
                      items:
                        type: string
                        enum:
                          [
                            "cough",
                            "fever",
                            "shortness of breathe",
                            "lack of smell",
                            "lack of taste",
                            "tiredness",
                            "burning eyes",
                            "headaches",
                            "diarrhea",
                          ]
                    name:
                      type: string
                      example: "Manuel"
                    patientNumber:
                      type: number
                      minLength: 9
                      example: 999999999
                    birthdayDate:
                      type: string
                      format: date
                    contacts:
                      type: object
                      properties:
                        email:
                          type: string
                          format: email
                        phone:
                          type: number
                          minLength: 9
                          example: 913412123
                numberOfTests:
                  type: number
                  example: 2
        "401":
          description: Have any error on execute query or connection into database
      security:
        - JWT: []
  /covid-tests/count/day:
    get:
      tags:
        - CovidTest
      summary: Return number of tests by day
      description: ""
      operationId: countTestsByDay
      produces:
        - application/json
      responses:
        "200":
          description: "Have COVID Tests storaged on database"
          schema:
            type: array
            items:
              type: object
              properties:
                _id:
                  type: string
                  format: date
                numberOfTests:
                  type: number
                  example: 3
        "401":
          description: Have any error on execute query or connection into database
      security:
        - JWT: []
